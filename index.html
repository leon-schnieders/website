<head> API Testing Zone </head>
<body>

  
  
  <div style="max-width: 800px; padding: auto;">
    
    <h1> User Info </h1>

    <input type="text" id="city" value="Bochum">
    
    <button onclick="myFunction()">Lets Go</button>
  
    <h2> Wetter </h2>
  
    <p id="weather_text"> hmm </p>

  </div>


  <script>
  
    console.log("Hello world");
  
    var weather_p = document.getElementById("weather_text");
  
    var weather_data;
  
    function getWether(API_data){  
      var t = "Wetter in " + API_data.name + " : " + API_data.weather[0].description;
      console.log(t);
      weather_p.innerHTML =  t;
    }
  
 
  
    function fetchWeather(my_lat , my_lon){
        
      var lat = 51.48184;
    
      var lon = 7.216236;
    
      if( typeof my_lat !== "undefined") { lat = my_lat; }
    
      if( typeof my_lon !== "undefined") { lon = my_lon; }
    
      var fetch_url = 'https://api.openweathermap.org/data/2.5/weather?lat=' + lat + '6&lon=' + lon + '&appid=d1ffef114ff90bd71199fb1b8d279642';
        
      fetch(fetch_url)
      .then(response => {
        return response.json();
      })
      .then(users => {
        console.log("Wetter");
        console.log(users);
        weather_data = users;
        getWether(users);
      });
    }
  
    fetchWeather();
  

    var my_location;
    
    
    function fetchLocation(){
      
      var city_name = getElementById("city").value;
      
      var fetch_url ='https://api.openweathermap.org/geo/1.0/direct?q=' + city_name + '&limit=5&appid=d1ffef114ff90bd71199fb1b8d279642'
      
      fetch(fetch_url)
      .then(response => { 
        return response.json();              
      })
      .then(users => {
        console.log("Location");
        console.log(users);
        my_location = users[0];
        fetchWeather(my_location.lat,my_location.lon);
      });
    }
    
    fetchLocation();
  
  </script>
</body>
